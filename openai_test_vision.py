from dotenv import load_dotenv
import os
from openai import OpenAI

import base64
import requests


# api 키를 가져옴(보안)
load_dotenv()
openai_api_key=os.getenv("OPENAI_API_KEY")
MODEL = "gpt-4-vision-preview"


# url의 이미지(웹상의 이미지)
def describe_web_img(openai_api_key, MODEL):
    client = OpenAI(api_key = openai_api_key)
    
    response = client.chat.completions.create(
    model=MODEL,
    messages=[
        {
        "role": "user",
        "content": [
            {"type": "text", "text": "What’s in this image? 한글로 알려줘!"},
            {
            "type": "image_url",
            "image_url": {
                "url": "data:image/jpeg;base64,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",
            },
            },
        ],
        }
    ],
    max_tokens=300,
    )
    print(response.choices[0].message.content)




# 바이너리로 이미지 인코딩
def encode_image(image_path):
  with open(image_path, "rb") as image_file:
    return base64.b64encode(image_file.read()).decode('utf-8')

# 로컬에 있는 이미지 
def describe_local_img(openai_api_key, MODEL):
    image_path = "image.jpg" #앵무새
    # Getting the base64 string
    base64_image = encode_image(image_path)

    headers = {
    "Content-Type": "application/json",
    "Authorization": f"Bearer {openai_api_key}"
    }

    payload = {
    "model": MODEL,
    "messages": [
        {
        "role": "user",
        "content": [
            {
            "type": "text",
            "text": "What’s in this image? 한글로 설명해줘"
            },
            {
            "type": "image_url",
            "image_url": {
                "url": f"data:image/jpeg;base64,{base64_image}"
            }
            }
        ]
        }
    ],
    "max_tokens": 300
    }

    response = requests.post("https://api.openai.com/v1/chat/completions", headers=headers, json=payload)

    print(response.json()['choices'][0]['message']['content'])


describe_web_img(openai_api_key, MODEL)
describe_local_img(openai_api_key, MODEL)